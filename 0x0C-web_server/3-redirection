#!/usr/bin/env bash
# BASH SCRIPT TO Install nginx web server
# AND
# Configure your Nginx server so that
# /redirect_me is redirecting to another page.


sudo apt-get update
sudo apt-get install nginx -y

sudo ufw allow 'Nginx HTTP'

# Make directory to host the new page redirected to
sudo mkdir -p /etc/nginx/sites-available/redirected

#TO CHANGE SENTENCE IN FILE WITH SPECIAL CHARACTER '/' USE ANY SCICIAL NOT BEING USED LIKE '@'
# sed -i 's/ /g'
# 's/ /' SUBISTITUEM
# -i  CHANGE THE FILE IN PLACE
# '/ /g' CHANGE GLOBAL IN ALL ACCURED IN THE FILE
#sed -i 's@/var/www/html@' /etc/nginx/sites-avilable/default #<<- DIRECTORY OF THE FILE

#USING SED TO DELETE ALL NOT NECECERY COMMANDS
# -i  CHANGE THE FILE IN PLACE
sudo sed -i '/^\W*#.*/d' /etc/nginx/sites-available/default

echo "<html><body>301 Moved Permanently</body></html>" | sudo tee /var/www/html/redirected/redirected.html

echo "server {
    listen 80;
    server_name _;
    location /redirect_me {
        return 301 /var/www/html/redirected/redirected.html   # Replace with the desired URL
    }
}" | sudo tee /etc/nginx/sites-available/redirected


#sudo ln -s /etc/nginx/sites-available/redirected /etc/nginx/sites-enabled/


sudo nginx -t

udo service nginx restart
